services:
  - type: web
    name: yantrax-backend-preview
    env: python
    plan: free
    branch: feat/add-alembic-migrations
    buildCommand: pip install --upgrade pip setuptools wheel build && pip install --prefer-binary -r requirements.txt
    startCommand: gunicorn -w 4 -b 0.0.0.0:$PORT backend.main:app
    envVars:
      - key: MARKET_DATA_SOURCE
        value: mock
      - key: USE_DB
        value: "false"
      - key: MARKET_DATA_CACHE_SECONDS
        value: "15"
      - key: MARKET_DATA_REQUEST_TIMEOUT
        value: "5"
